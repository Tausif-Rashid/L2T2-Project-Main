CREATE OR REPLACE TRIGGER STUDENT_change
AFTER INSERT OR UPDATE OR DELETE 
ON STUDENT
FOR EACH ROW 
DECLARE 
ACTION_TYPE VARCHAR(30);
ACTED_ON VARCHAR(10);
BEGIN 
	ACTION_TYPE := 'UPDATE_STUDENT';
	ACTED_ON:=:NEW.STUDENT_ID;
	IF DELETING THEN 
	ACTION_TYPE := 'DELETE_STUDENT';
	ACTED_ON:=:OLD.STUDENT_ID;
	ELSIF INSERTING THEN
	ACTION_TYPE := 'INSERT_STUDENT';
	END IF;

	INSERT INTO PROJECTDBA.LOGS
(LOG_ID, ACTION_TYPE, ACTION_ON, ACTED_BY, ACTION_TIME)
VALUES('log_' || LOG_ID.nextval , ACTION_TYPE, ACTED_ON ,public_package.logged_in_id, SYSDATE); 
END;
